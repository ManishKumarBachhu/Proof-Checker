#include <iostream>
#include <string>
#include <stack>
#define ull unsigned long long
#define ll long long
#define IOS ios::sync_with_stdio(0); cin.tie(0); cout.tie(0);
using namespace std;
string s;
int main()
{
	IOS;
	ll flag = 0,a;
	stack <char> op,ans;
	cin>>s;
	a = s.size();
	for (int i = 0; i < s.size(); ++i)
	{
		if(!(s[i] > 96 and s[i] < 123) or s[i] == 'V')
		{	
			op.push(s[i]);
			if(s[i] == '~')
				flag = 1;
			else flag = 0;
			if(op.top() == ')')
			{
				op.pop();
				do
				{
					if(op.top() != ')' and op.top() != '~')
						ans.push(op.top());
					op.pop();
				}
				while(op.top() != '(');
				op.pop();
				if(!op.empty() and (op.top() == '~'))
					ans.push(op.top());
				continue;
			}
		}
		else
		{
			if(flag == 1)
			{
				ans.push(s[i]);
				ans.push(op.top());
				op.pop();
				continue;
			}
			ans.push(s[i]);
		}
	}
	while(!op.empty())
	{
		ans.push(op.top());
		op.pop();
	}
	while(!ans.empty())
	{
		in.push(ans.top());
		ans.pop();
	}
    return 0;
}
